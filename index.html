<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新しくないタブ</title>

    <!-- QRコード生成ライブラリ -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1/build/qrcode.min.js"></script>

    <!-- =============================================== -->
    <!-- CSS (デザイン)                                  -->
    <!-- =============================================== -->
    <style>
        :root {
            --bg-start: #0a0a2a;
            --bg-end: #020024;
            --panel-bg: rgba(18, 18, 58, 0.75);
            --panel-border: rgba(138, 43, 226, 0.3);
            --accent-color: #944dff;
            --text-primary: #e0e7ff;
            --text-secondary: #a7b3d9;
            --font-family: 'Roboto', 'Noto Sans JP', "Hiragino Kaku Gothic ProN", sans-serif;
        }
        html, body {
            height: 100%;
            margin: 0;
            font-family: var(--font-family);
            background: radial-gradient(circle, var(--bg-start) 0%, var(--bg-end) 100%);
            color: var(--text-primary);
            overflow: hidden;
            user-select: none;
        }
        .hidden { display: none !important; }
        #loader {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            transition: opacity 1s ease-in;
        }
        #loader.fade-out {
            opacity: 0;
            pointer-events: none;
        }
        #skipBtn {
            position: absolute;
            bottom: 20px;
            right: 20px;
            padding: 8px 16px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: #fff;
            border-radius: 6px;
            cursor: pointer;
            z-index: 10000;
            font-weight: bold;
        }
        #staffRollContainer {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: relative;
        }
        .credits-list {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 800px;
            color: #e0e0e0;
            text-align: center;
            font-size: 16px;
            animation: scroll-up 20s linear forwards;
        }
        .credits-list pre {
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
            font-size: 1em;
            line-height: 1.8;
            text-align: left;
            white-space: pre-wrap;
            margin: 0;
        }
        @keyframes scroll-up {
            from { top: 100%; }
            to { top: -120%; }
        }
        .site-wrapper {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            opacity: 0;
            transition: opacity 1s ease-out;
        }
        .site-wrapper.visible {
            opacity: 1;
        }
        .site-header {
            padding: 1.5rem 2.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--panel-border);
            background: rgba(10, 10, 42, 0.5);
            backdrop-filter: blur(8px);
        }
        .site-title {
            font-size: 24px;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 0 8px var(--accent-color);
        }
        .site-header nav ul {
            margin: 0;
            padding: 0;
            list-style: none;
            display: flex;
            gap: 2rem;
        }
        .site-header nav a {
            color: var(--text-secondary);
            font-weight: 700;
            cursor: pointer;
            transition: color 0.2s, text-shadow 0.2s;
        }
        .site-header nav a:hover {
            color: #fff;
            text-shadow: 0 0 5px var(--accent-color);
        }
        main {
            flex-grow: 1;
            padding: 2.5rem;
            max-width: 1400px;
            width: 100%;
            margin: 0 auto;
            box-sizing: border-box;
            overflow-y: auto;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
            animation: fade-in 0.5s;
        }
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .item-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
        }
        .item-card {
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 12px;
            overflow: hidden;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.15);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        .item-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 0 25px var(--accent-color);
        }
        .item-card .thumbnail-container img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            display: block;
        }
        .item-card-content {
            padding: 16px;
        }
        .item-card-title {
            margin: 0 0 8px 0;
            font-size: 18px;
            font-weight: 700;
        }
        .item-card-desc {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.6;
            height: 4.8em;
            overflow: hidden;
        }
        .recommend-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--accent-color);
            color: white;
            padding: 4px 10px;
            font-size: 12px;
            font-weight: bold;
            border-radius: 6px;
        }
        /* FAQセクションのスタイル */
        .faq-container {
            padding: 24px;
            max-width: 800px;
            margin: auto;
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 12px;
        }
        .faq-container dt {
            font-weight: 700;
            color: var(--accent-color);
            margin-top: 1.5em;
        }
        .faq-container dd {
            margin-left: 0;
            padding-left: 1em;
            border-left: 3px solid var(--panel-border);
            color: var(--text-secondary);
        }
        .btn {
            padding: 10px 18px;
            border-radius: 8px;
            background: linear-gradient(145deg, #4f23a6, #3b1a7d);
            color: var(--text-primary);
            border: 1px solid var(--panel-border);
            cursor: pointer;
            font-weight: 700;
            text-transform: uppercase;
            transition: all 0.2s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            font-family: inherit;
        }
        .btn:hover {
            background: linear-gradient(145deg, #6a34d9, #4f23a6);
            box-shadow: 0 0 15px var(--accent-color);
        }
        .btn:disabled {
            background: #555;
            cursor: not-allowed;
            box-shadow: none;
        }
        .btn.ghost {
            background: transparent;
            border-style: dashed;
        }
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(8px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }
        .modal-overlay.visible {
            opacity: 1;
            pointer-events: auto;
        }
        .modal-content {
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 12px;
            padding: 24px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            transform: scale(0.95);
            transition: transform 0.3s;
        }
        .modal-overlay.visible .modal-content {
            transform: scale(1);
        }
        .modal-content h2 {
            margin-top: 0;
            font-size: 22px;
            border-bottom: 1px solid var(--accent-color);
            padding-bottom: 8px;
            margin-bottom: 16px;
        }
        .modal-footer {
            text-align: right;
            margin-top: 24px;
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }
        #details-modal-img {
            width: 100%;
            height: 240px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 16px;
        }
        #details-modal-desc {
            color: var(--text-secondary);
            line-height: 1.7;
        }
        #qrcode {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            background: white;
            padding: 10px;
            border-radius: 8px;
        }
        .url-container {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }
        .url-input {
            flex-grow: 1;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--panel-border);
            color: #e6eef8;
            border-radius: 6px;
        }
        #fake-translator {
            position: fixed;
            inset: 0;
            background: #fff;
            z-index: 10000;
            color: #202124;
            font-family: 'Roboto', 'Noto Sans JP', sans-serif;
            display: flex;
            flex-direction: column;
        }
        .translator-header {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            padding: 12px 24px;
            border-bottom: 1px solid #e0e0e0;
            flex-shrink: 0;
        }
        .translator-logo {
            font-size: 22px;
            font-weight: 500;
            color: #5f6368;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .translator-main {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            padding: 24px;
        }
        .translator-lang-bar {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        .lang-btn {
            padding: 8px 16px;
            border: none;
            background: none;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            color: #5f6368;
            border-bottom: 2px solid transparent;
        }
        .lang-btn.active {
            color: #1a73e8;
            border-bottom-color: #1a73e8;
        }
        .translator-body {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 16px;
            flex-grow: 1;
            border: 1px solid #dadce0;
            border-radius: 8px;
            padding: 16px;
        }
        .translator-panel {
            display: flex;
            flex-direction: column;
        }
        .translator-textarea {
            flex-grow: 1;
            resize: none;
            border: none;
            padding: 0;
            font-size: 24px;
            font-family: 'Roboto', 'Noto Sans JP', sans-serif;
            box-sizing: border-box;
            background: none;
            color: #202124;
        }
        .translator-textarea:focus {
            outline: none;
        }
        .translator-divider {
            width: 1px;
            background: #dadce0;
        }
    </style>
</head>
<body>

    <!-- スタッフロール -->
    <div id="loader">
        <button id="skipBtn">スキップ</button>
        <div id="staffRollContainer">
            <div class="credits-list">
<pre>
プロデューサー .................. 底原永和
ディレクター .................... 底原永和
エグゼクティブプロデューサー .... 底原永和
アシスタントプロデューサー ...... 底原永和
デザイン ........................ 底原永和
シナリオ ........................ 底原永和
レベルデザイン .................. 底原永和
バランス調整 .................... 底原永和
UI/UXデザイン ................... 底原永和
プログラムリード ................ 底原永和
エンジンプログラマー ............ 底原永和
ネットワークプログラマー ........ 底原永和
AIプログラマー .................. 底原永和
ツールプログラマー .............. 底原永和
サウンドプログラマー ............ 底原永和
グラフィックプログラマー ........ 底原永和
アートディレクター .............. 底原永和
キャラクターデザイナー .......... 底原永和
モンスターデザイナー ............ 底原永和
背景デザイナー .................. 底原永和
UIデザイナー .................... 底原永和
2Dアーティスト .................. 底原永和
3Dモデラー ...................... 底原永和
リガー .......................... 底原永和
アニメーター .................... 底原永和
モーションキャプチャー .......... 底原永和
VFXアーティスト ................ 底原永和
ライティングアーティスト ........ 底原永和
テクスチャーアーティスト ........ 底原永和
サウンドディレクター ............ 底原永和
作曲 ............................ 底原永和
効果音制作 ...................... 底原永和
ボイス収録 ...................... 底原永和
ミキシング ...................... 底原永和
QAマネージャー .................. 底原永和
QAリーダー ...................... 底原永和
QAテスター ...................... 底原永和
ローカライズディレクター ........ 底原永和
翻訳 ............................ 底原永和
ローカライズテスター ............ 底原永和
マーケティングマネージャー ...... 底原永和
PR .............................. 底原永和
コミュニティマネージャー ........ 底原永和
公式サイト運営 .................. 底原永和
スペシャルサンクス .............. 底原永和
</pre>
            </div>
        </div>
    </div>
    
    <div class="site-wrapper" id="site-wrapper">
        <header class="site-header">
            <div class="site-title">底原永和の作った楽しいやつ</div>
            <nav>
                <ul>
                    <li><a data-target="home">ホーム</a></li>
                    <li><a data-target="faq">よくある質問</a></li>
                    <li><a href="https://docs.google.com/forms/d/e/1FAIpQLSdUZqH-vSXeZr6nbuqrmJgiaLfytVIOxdlo4ylDFp-koLPT0g/viewform" target="_blank" rel="noopener noreferrer">フィードバック</a></li>
                    <li><a id="replay-staffroll">スタッフロール</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <!-- ホーム（作品一覧） -->
            <div id="content-home" class="content-section active">
                <div id="item-list" class="item-grid">
                    <!-- JSで作品カードが自動的に追加されます -->
                </div>
            </div>

            <!-- よくある質問 -->
            <div id="content-faq" class="content-section">
                <div class="faq-container">
                    <h2>よくある質問</h2>
                    <dl>
                        <dt>Q. なぜ、アイフィルターにブロックされないのですか？</dt>
                        <dd>A. アイフィルターは特定の文字列を含むサイトをブロックする仕組みになっています。文字列を工夫して含めないようにしているためブロックされません。また、タブの名前を変えてあるので先生にも気づかれにくく、エンターキーを押すとすべてのサイトで偽の翻訳サイトが表示されるようになっています。後ろから先生が来ても安心です。</dd>

                        <dt>Q. アップデートの頻度はどれくらいですか？</dt>
                        <dd>A. 基本的に毎日です。毎日のアップデートで細かな不具合を修正しています。特に土日には新しいゲームが追加されるので、ぜひフィードバックから「追加してほしいゲーム」を教えてください。</dd>
                        
                        <dt>Q. 本当に底原永和が作ったんですか？</dt>
                        <dd>A. もちろんです。当たり前だろ、なめんな。</dd>

                        <dt>Q. 万が一ブロックされたらどうしますか？</dt>
                        <dd>A. 必ずプレイできるように修正します。</dd>

                        <dt>Q. セキュリティは大丈夫ですか？</dt>
                        <dd>A. ご安心ください。あの「伝説の底原永和」が作ったので大丈夫です。</dd>

                        <dt>Q. 実装されたと書かれているのに、されていない機能があります。</dt>
                        <dd>A. それは申し訳ありません。</dd>

                        <dt>Q. くそゲーですね。</dt>
                        <dd>A. BANです。</dd>

                        <dt>Q. なぜ本名を入力しないといけないのですか？</dt>
                        <dd>A. 管理をしやすくするためです。</dd>

                        <dt>Q. スマホでもできますか？</dt>
                        <dd>A. スマホには対応していません。推奨環境はPCです。</dd>

                        <dt>Q. 有料ですか？</dt>
                        <dd>A. 無料で遊べます。</dd>

                        <dt>Q. 広告は入っていますか？</dt>
                        <dd>A. 広告は一切ありません。</dd>

                        <dt>Q. 不具合を見つけた場合はどうすればいいですか？</dt>
                        <dd>A. フィードバックから送ってください。</dd>

                        <dt>Q. フィードバックはどこから送れますか？</dt>
                        <dd>A. 上のメニューから入力できます。</dd>

                        <dt>Q. データは保存されますか？</dt>
                        <dd>A. ハイスコアなどはローカルで保存されます。</dd>
                    </dl>
                </div>
            </div>
        </main>
    </div>

    <!-- 作品詳細モーダル -->
    <div id="details-modal" class="modal-overlay">
        <div class="modal-content">
            <h2 id="details-modal-title"></h2>
            <img id="details-modal-img" src="" alt="作品のサムネイル">
            <p id="details-modal-desc"></p>
            <div class="modal-footer">
                <a id="details-modal-launch-btn" href="#" target="_blank" class="btn">起動する</a>
                <button id="details-modal-share-btn" class="btn ghost">共有</button>
                <button data-close-modal class="btn ghost">閉じる</button>
            </div>
        </div>
    </div>
    
    <!-- 共有モーダル -->
    <div id="share-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>作品を共有</h2>
            <div id="qrcode"></div>
            <p style="font-size: 14px; text-align: center; color: var(--text-secondary);">QRコードをスキャンするか、URLをコピー</p>
            <div class="url-container">
                <input type="text" id="share-url-input" class="url-input" readonly>
                <button class="btn" id="copy-url-btn">コピー</button>
            </div>
            <div class="modal-footer">
                <button data-close-modal class="btn ghost">閉じる</button>
            </div>
        </div>
    </div>

    <!-- 一言モーダル -->
    <div id="oneword-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>底原永和の一言</h2>
            <p style="line-height: 1.7; font-size: 16px;">土日これの開発に時間を使ったから課題終わってない(^▽^)何すればいいのか教えて！</p>
            <div class="modal-footer">
                <button data-close-modal class="btn">閉じる</button>
            </div>
        </div>
    </div>
    
    <!-- 偽翻訳サイト -->
    <div id="fake-translator" class="hidden">
        <header class="translator-header">
            <div class="translator-logo">
                <svg focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>
                <span>翻訳</span>
            </div>
        </header>
        <main class="translator-main">
            <div class="translator-lang-bar">
                <button class="lang-btn active">日本語</button>
                <button class="lang-btn">英語</button>
            </div>
            <div class="translator-body">
                <div class="translator-panel">
                    <textarea id="translator-input" class="translator-textarea" placeholder="テキストを入力"></textarea>
                </div>
                <div class="translator-divider"></div>
                <div class="translator-panel">
                    <textarea id="translator-output" class="translator-textarea" readonly></textarea>
                </div>
            </div>
        </main>
    </div>

    <!-- =============================================== -->
    <!-- JavaScript (サイトの動き)                       -->
    <!-- =============================================== -->
    <script>
        const items = [
          {
            title: "ブロック落とし",
            description: "あれをを底原永和がまあパクったゲーム",
            thumbnail: "./apps/app1/thumbnail.png",
            url: "./apps/app1/index.html",
            recommend: "とわ一押し"
          },
          {
            title: "ブロックトレーニング",
            description: "同じ色のブロックをそろえて消そう！連鎖が気持ちいい！",
            thumbnail: "./apps/app2/thumbnail.png",
            url: "./apps/app2/index.html",
            recommend: "今までの人気！"
          },
          {
            title: "果物集め",
            description: "スイカのあれ",
            thumbnail: "./apps/app3/thumbnail.png", 
            url: "./apps/app3/index.html",
            recommend: null
          },
          {
            title: "ボール移動",
            description: "多分一番人気ないかな(^▽^)",
            thumbnail: "./apps/app4/thumbnail.png", 
            url: "./apps/app4/index.html",
            recommend: "最低人気の予定！"
          },
          {
            title: "ジオメタリートレーニング",
            description: "なつかしいね。ちな、BETA版ねバグおおいよ",
            thumbnail: "./apps/app5/thumbnail.png", 
            url: "./apps/app5/index.html",
            recommend: "バグ多い！早期アクセスバージョン"
          },
          {
            title: "待ち針のやつ",
            description: "地味に楽しいよ",
            thumbnail: "./apps/app6/thumbnail.png", 
            url: "./apps/app6/index.html",
            recommend: null
          }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            const loader = document.getElementById('loader');
            const skipBtn = document.getElementById('skipBtn');
            const siteWrapper = document.getElementById('site-wrapper');
            const replayStaffRollBtn = document.getElementById('replay-staffroll');
            const fakeTranslator = document.getElementById('fake-translator');
            const translatorInput = document.getElementById('translator-input');
            const translatorOutput = document.getElementById('translator-output');
            
            let staffRollTimer;

            function startSite() {
                if (document.body.dataset.siteStarted) return;
                document.body.dataset.siteStarted = true;
                playStaffRoll();
            }

            function playStaffRoll() {
                const container = document.getElementById('staffRollContainer');
                const oldCredits = container.querySelector('.credits-list');
                if(oldCredits) {
                    const newCredits = oldCredits.cloneNode(true);
                    oldCredits.remove();
                    container.appendChild(newCredits);
                }
                loader.classList.remove('fade-out');
                document.body.style.overflow = 'hidden';
                siteWrapper.classList.remove('visible');
                clearTimeout(staffRollTimer);
                staffRollTimer = setTimeout(showMainContent, 20000);
            }

            function showMainContent() {
                if (!loader.classList.contains('fade-out')) {
                    loader.classList.add('fade-out');
                    document.body.style.overflow = 'auto';
                    siteWrapper.classList.add('visible');

                    // 一言モーダルを表示
                    const onewordModal = document.getElementById('oneword-modal');
                    // メインコンテンツ表示と少しタイミングをずらして表示
                    setTimeout(() => {
                        onewordModal.classList.add('visible');
                    }, 500);
                }
            }
            
            skipBtn.addEventListener('click', () => { clearTimeout(staffRollTimer); showMainContent(); });
            replayStaffRollBtn.addEventListener('click', playStaffRoll);

            // サイトを直接開始
            startSite();
            
            let cheatCodeBuffer = null;
            let cheatTimeout;
            document.addEventListener('keydown', (e) => {
                if (e.target.closest('input, textarea') || document.querySelector('.modal-overlay.visible') || !fakeTranslator.classList.contains('hidden')) {
                    return;
                }
                if (e.key === ' ' || e.code === 'Space') {
                    e.preventDefault();
                    cheatCodeBuffer = '';
                    clearTimeout(cheatTimeout);
                    cheatTimeout = setTimeout(() => { cheatCodeBuffer = null; }, 3000);
                    return;
                }
                if (e.key === 'Enter') {
                    e.preventDefault();
                    fakeTranslator.classList.toggle('hidden');
                    cheatCodeBuffer = null;
                    return;
                }
                if (cheatCodeBuffer !== null) {
                    if (e.key.length === 1) {
                        cheatCodeBuffer += e.key.toLowerCase();
                    }
                    if (cheatCodeBuffer === 'reset') {
                        alert('リセットコマンドは現在無効です。');
                        cheatCodeBuffer = null;
                        clearTimeout(cheatTimeout);
                    }
                }
            });
            
            translatorInput.addEventListener('input', () => {
                translatorOutput.value = simpleTranslate(translatorInput.value);
            });
            function simpleTranslate(text) {
                const map = {'a':'あ', 'i':'い', 'u':'う', 'e':'え', 'o':'お', ' ':'　'};
                return text.toLowerCase().split('').map(char => map[char] || char).join('');
            }

            const navLinks = document.querySelectorAll('nav a[data-target]');
            const contentSections = document.querySelectorAll('.content-section');
            navLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    const targetId = event.target.dataset.target;
                    contentSections.forEach(section => section.classList.remove('active'));
                    document.getElementById(`content-${targetId}`).classList.add('active');
                });
            });

            const itemListContainer = document.getElementById('item-list');
            items.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = 'item-card';
                itemElement.dataset.itemId = index;
                let recommendBadge = item.recommend ? `<div class="recommend-badge">${item.recommend}</div>` : '';
                itemElement.innerHTML = `${recommendBadge}<div class="thumbnail-container"><img src="${item.thumbnail}" alt="${item.title}" onerror="this.parentElement.innerHTML = '<p style=\'text-align:center;padding:20px;\'>画像が見つかりません</p>';"></div><div class="item-card-content"><h3 class="item-card-title">${item.title}</h3><p class="item-card-desc">${item.description}</p></div>`;
                itemListContainer.appendChild(itemElement);
            });

            const detailsModal = document.getElementById('details-modal');
            const shareModal = document.getElementById('share-modal');
            let currentItemUrl = '';

            itemListContainer.addEventListener('click', function(event) {
                const clickedCard = event.target.closest('.item-card');
                if (clickedCard) {
                    const itemData = items[clickedCard.dataset.itemId];
                    currentItemUrl = itemData.url;
                    document.getElementById('details-modal-title').textContent = itemData.title;
                    document.getElementById('details-modal-img').src = itemData.thumbnail;
                    document.getElementById('details-modal-desc').textContent = itemData.description;
                    document.getElementById('details-modal-launch-btn').href = itemData.url;
                    detailsModal.classList.add('visible');
                }
            });
            
            document.getElementById('details-modal-share-btn').addEventListener('click', () => {
                const url = new URL(currentItemUrl, window.location.href).href;
                document.getElementById('share-url-input').value = url;
                const qrcodeContainer = document.getElementById('qrcode');
                qrcodeContainer.innerHTML = '';
                QRCode.toCanvas(url, { width: 220, errorCorrectionLevel: 'H' }, (err, canvas) => {
                    if (err) return console.error(err);
                    qrcodeContainer.appendChild(canvas);
                });
                detailsModal.classList.remove('visible');
                shareModal.classList.add('visible');
            });
            
            document.getElementById('copy-url-btn').addEventListener('click', (e) => {
                document.getElementById('share-url-input').select();
                navigator.clipboard.writeText(document.getElementById('share-url-input').value).then(() => {
                    e.target.textContent = 'コピー完了!';
                    setTimeout(() => { e.target.textContent = 'コピー'; }, 2000);
                });
            });

            document.querySelectorAll('[data-close-modal]').forEach(btn => btn.addEventListener('click', () => btn.closest('.modal-overlay').classList.remove('visible')));
            document.querySelectorAll('.modal-overlay').forEach(overlay => overlay.addEventListener('click', (e) => { if (e.target === overlay) overlay.classList.remove('visible'); }));
        });
    </script>
</body>
</html>